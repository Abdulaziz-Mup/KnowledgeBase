---
title: Проблемы с батареей и потреблением трафика
sidebar_position: 1
---

:::info

В этой статье рассказывается об AdGuard для Android — многофункциональном блокировщике рекламы, который защищает ваше устройство на системном уровне. Чтобы увидеть, как он работает, [скачайте приложение AdGuard](https://adguard.com/download.html?auto=true)

:::

На устройствах Android с ОС 6 и более ранних встроенная статистика часто связывала высокое использование трафика и/или батареи с AdGuard. Это происходило потому, что AdGuard учитывал весь отфильтрованный трафик из разных приложений. В результате доля AdGuard в общем объёме данных и расходе батареи была завышена, а доля других приложений — занижена.

Однако в Android 7 это было исправлено. Теперь информация во встроенной статистике использования данных Android очень близка к реальности, хотя в данных об использовании батареи есть небольшие расхождения.

Тем не менее, пользователи AdGuard всегда могут увидеть реальную картину на экране *Использование батареи*.

### Собственная статистика расхода батареи

Доступ к нему можно получить, перейдя по ссылке *Статистика* → *Использование батареи*.

![Данные о батарее *mobile_border](https://cdn.adtidy.org/content/articles/battery/1.png)

Внутри вы найдёте график, показывающий реальное потребление ресурса батареи AdGuard запоследние 24 часа, с возможностью получить более детальную информацию о почасовом расходе, нажав на график. Кроме того, там также есть числовая разбивка релевантных данных и краткое техническое пояснение.

### Сколько заряда батареи на самом деле потребляет AdGuard?

Для начала приведём немного теории и ссылок с необходимыми данными.

1. Android считает потребление трафика исходя из так называемого Power Profile, который предоставляется каждым производителем: <https://source.android.com/devices/tech/power/values.html>

2. Главная часть Power Profile — это набор значений, выраженных в миллиамперах, которые определяют потребление батареи каждым компонентом устройства: <https://source.android.com/devices/tech/power/values.html>

Например, из таблицы выше:

_wifi.active=_ 31mA дополнительное потребление в миллиамперах, вызванное передачей данных по Wi-Fi.

_radio.active=_ 100-300mA дополнительное потребление в миллиамперах, вызванное передачей данных по мобильной сети.

_cpu.active=_ 100-200mA дополнительное потребление в миллиамперах, вызванное работой процессора.

3. AdGuard самостоятельно почти не потребляет трафика, так что для оценки потребления батареи отбросим значения Mobile/Wi-Fi packets и остановимся на подсчёте CPU.

Формула для вычисления потребления:
> "CPU TIME (ms)" X "cpu.active" / (60 * 60 * 1000) = "POWER USE mAh"

Подставим в эту формулу реальные значения.

Возьмём _CPU total_ из второго скриншота и переведём в миллисекунды: 506000

Коэффициент _cpu.active_ для 2 ГГц будет примерно равен 225 мАч

Финальный результат
> 506000 * 225 / (60 * 60 * 1000) = 31,625mAh

### Итог

Реальное потребление в **разы ниже** показанного в статистике Android. Вместо 220 мАч оно должно быть в районе 31—40 мАч. С другой стороны, потребление браузера должно быть не 66 мАч, а около 200 мАч.
