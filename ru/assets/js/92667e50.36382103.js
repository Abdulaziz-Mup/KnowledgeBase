"use strict";(self.webpackChunkadguard_knowledge_base=self.webpackChunkadguard_knowledge_base||[]).push([[7206],{4137:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>u});var o=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=o.createContext({}),d=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=d(r),u=a,f=m["".concat(l,".").concat(u)]||m[u]||c[u]||n;return r?o.createElement(f,i(i({ref:t},p),{},{components:r})):o.createElement(f,i({ref:t},p))}));function u(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,i=new Array(n);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var d=2;d<n;d++)i[d]=r[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}m.displayName="MDXCreateElement"},4536:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>n,metadata:()=>s,toc:()=>d});var o=r(7462),a=(r(7294),r(4137));const n={title:"Moving the CA certificate to the system store on rooted devices",sidebar_position:14},i=void 0,s={unversionedId:"adguard-for-android/solving-problems/https-certificate-for-rooted",id:"adguard-for-android/solving-problems/https-certificate-for-rooted",title:"Moving the CA certificate to the system store on rooted devices",description:"\u0412 \u044d\u0442\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u0431 AdGuard \u0434\u043b\u044f Android \u2014 \u043c\u043d\u043e\u0433\u043e\u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u043c \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u0432\u0430\u0448\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043d\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c \u0443\u0440\u043e\u0432\u043d\u0435. \u0427\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c, \u043a\u0430\u043a \u043e\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0441\u043a\u0430\u0447\u0430\u0439\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 AdGuard",source:"@site/i18n/ru/docusaurus-plugin-content-docs/current/adguard-for-android/solving-problems/https-certificate-for-rooted.md",sourceDirName:"adguard-for-android/solving-problems",slug:"/adguard-for-android/solving-problems/https-certificate-for-rooted",permalink:"/KnowledgeBase/ru/adguard-for-android/solving-problems/https-certificate-for-rooted",draft:!1,editUrl:"https://github.com/AdguardTeam/KnowledgeBase/edit/master/docs/adguard-for-android/solving-problems/https-certificate-for-rooted.md",tags:[],version:"current",sidebarPosition:14,frontMatter:{title:"Moving the CA certificate to the system store on rooted devices",sidebar_position:14},sidebar:"tutorialSidebar",previous:{title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u0432 \u0417\u0430\u0449\u0438\u0449\u0451\u043d\u043d\u0443\u044e \u043f\u0430\u043f\u043a\u0443",permalink:"/KnowledgeBase/ru/adguard-for-android/solving-problems/secure-folder"},next:{title:"\u0418\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0441 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u043c\u0438 \u0434\u043b\u044f Android",permalink:"/KnowledgeBase/ru/adguard-for-android/solving-problems/compatibility-issues"}},l={},d=[{value:"How to install AdGuard&#39;s certificate to the system store",id:"how-to-install-adguards-certificate-to-the-system-store",level:2},{value:"Known issues with Chrome and Chromium-based browsers",id:"known-issues-with-chrome-and-chromium-based-browsers",level:2},{value:"\u0411\u0440\u0430\u0443\u0437\u0435\u0440 Bromite",id:"\u0431\u0440\u0430\u0443\u0437\u0435\u0440-bromite",level:3}],p={toc:d};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"\u0412 \u044d\u0442\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u0431 AdGuard \u0434\u043b\u044f Android \u2014 \u043c\u043d\u043e\u0433\u043e\u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u043c \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0449\u0438\u043a\u0435 \u0440\u0435\u043a\u043b\u0430\u043c\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0437\u0430\u0449\u0438\u0449\u0430\u0435\u0442 \u0432\u0430\u0448\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u043d\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c \u0443\u0440\u043e\u0432\u043d\u0435. \u0427\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c, \u043a\u0430\u043a \u043e\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, ",(0,a.kt)("a",{parentName:"p",href:"https://agrd.io/download-kb-adblock"},"\u0441\u043a\u0430\u0447\u0430\u0439\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 AdGuard"))),(0,a.kt)("p",null,"AdGuard for Android can ",(0,a.kt)("a",{parentName:"p",href:"/general/https-filtering/what-is-https-filtering"},"filter encrypted HTTPS traffic"),", thus blocking most ads and trackers on websites. On rooted devices, AdGuard also allows you to filter HTTPS traffic in apps. HTTPS filtering requires adding AdGuard's CA certificate to the list of trusted certificates."),(0,a.kt)("p",null,"On non-rooted devices, CA certificates can be installed to the ",(0,a.kt)("strong",{parentName:"p"},"user store"),". Only a limited subset of apps (mostly browsers) trust CA certificates installed to the user store, meaning HTTPS filtering will work only for such apps."),(0,a.kt)("p",null,"On rooted devices, you can install a certificate to the ",(0,a.kt)("strong",{parentName:"p"},"system store"),". That will allow AdGuard to filer HTTPS traffic in other apps as well."),(0,a.kt)("p",null,"\u0412\u043e\u0442 \u043a\u0430\u043a \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c."),(0,a.kt)("h2",{id:"how-to-install-adguards-certificate-to-the-system-store"},"How to install AdGuard's certificate to the system store"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open ",(0,a.kt)("em",{parentName:"p"},"AdGuard \u2192 Settings \u2192 Filtering \u2192 Network \u2192 HTTPS filtering \u2192 Security certificates"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"If you don't have any certificate yet, ",(0,a.kt)("strong",{parentName:"p"},"install the AdGuard Personal CA into the user store"),". This will allow AdGuard to filter HTTPS traffic in browsers.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Install the AdGuard Intermediate CA into the user store"),". You'll need it to run the adguardcert Magisk module that allows you to move certificates to the system store."),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{parentName:"p",src:"https://cdn.adtidy.org/blog/new/asx1xksecurity_certificates.png",alt:"Install the certificate *mobile_border"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Install the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/AdguardTeam/adguardcert/releases/latest/"},"latest release of the ",(0,a.kt)("strong",{parentName:"a"},"adguardcert")," Magisk module"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open ",(0,a.kt)("em",{parentName:"p"},"Magisk \u2192 Modules \u2192 Install from storage")," and select the downloaded ",(0,a.kt)("strong",{parentName:"p"},"adguardcert")," file. This will move the AdGuard Personal CA from the user store to the system store."),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{parentName:"p",src:"https://cdn.adtidy.org/content/kb/ad_blocker/android/solving_problems/https-certificate-for-rooted/magisk-module-4.png",alt:"Open Magisk modules *mobile"})),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{parentName:"p",src:"https://cdn.adtidy.org/content/kb/ad_blocker/android/solving_problems/https-certificate-for-rooted/magisk-module-5.png",alt:"Install from storage *mobile"})),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{parentName:"p",src:"https://cdn.adtidy.org/content/kb/ad_blocker/android/solving_problems/https-certificate-for-rooted/magisk-module-6.png",alt:"Select adguardcert *mobile"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Tap ",(0,a.kt)("strong",{parentName:"p"},"Reboot"),"."),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{parentName:"p",src:"https://cdn.adtidy.org/content/kb/ad_blocker/android/solving_problems/https-certificate-for-rooted/magisk-module-7.png",alt:"Reboot the device *mobile"})))),(0,a.kt)("p",null,"After the transfer, the ",(0,a.kt)("strong",{parentName:"p"},"AdGuard Personal CA")," in the system store will allow you to filter HTTPS traffic in apps, while the ",(0,a.kt)("strong",{parentName:"p"},"AdGuard Intermediate CA")," in the user store will allow you to filter HTTPS traffic in Chromium-based browsers (see below why)."),(0,a.kt)("h2",{id:"known-issues-with-chrome-and-chromium-based-browsers"},"Known issues with Chrome and Chromium-based browsers"),(0,a.kt)("p",null,"Chrome and other Chromium-based browsers require Certificate Transparency (CT) logs for certificates located in the system store. CT logs don't contain information about certificates issued by HTTPS-filtering apps. Therefore, AdGuard requires an additional certificate in the user store to filter HTTPS traffic in these browsers."),(0,a.kt)("h3",{id:"\u0431\u0440\u0430\u0443\u0437\u0435\u0440-bromite"},"\u0411\u0440\u0430\u0443\u0437\u0435\u0440 Bromite"),(0,a.kt)("p",null,"In addition to the above issue, Bromite doesn't trust certificates in the user store by default. To filter HTTPS traffic there, open Bromite, go to ",(0,a.kt)("inlineCode",{parentName:"p"},"chrome://flags"),", and set ",(0,a.kt)("em",{parentName:"p"},"Allow user certificates")," to ",(0,a.kt)("em",{parentName:"p"},"Enabled"),". ",(0,a.kt)("strong",{parentName:"p"},"This applies to both rooted and non-rooted devices"),"."))}c.isMDXComponent=!0}}]);